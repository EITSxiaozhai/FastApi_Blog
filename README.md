# ğŸš€ FastAPI + Vue å…¨æ ˆåšå®¢ç³»ç»Ÿ

ä¸€ä¸ªç°ä»£åŒ–çš„å…¨æ ˆåšå®¢å¹³å°ï¼Œé‡‡ç”¨ FastAPI + Vue3/2 æŠ€æœ¯æ ˆï¼Œé›†æˆäº†ä¸°å¯Œçš„åŠŸèƒ½æ¨¡å—å’Œç°ä»£åŒ–çš„å¼€å‘å®è·µã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ” è®¤è¯ä¸å®‰å…¨
- **å¤šé‡è®¤è¯æœºåˆ¶**ï¼šJWT åŒ Token è‡ªåŠ¨ç»­æœŸï¼ˆè®¿é—® Token + åˆ·æ–° Tokenï¼‰
- **ç¬¬ä¸‰æ–¹ç™»å½•**ï¼šGitHub OAuth 2.0 é›†æˆï¼Œæ”¯æŒäºŒç»´ç æ‰«ç ç™»å½•
- **ä¼šè¯ç®¡ç†**ï¼šRedis + å†…å­˜åŒå±‚ç¼“å­˜ä¼šè¯å­˜å‚¨
- **Google reCAPTCHA**ï¼šç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·åˆ†ç¦»å¼éªŒè¯
- **é‚®ç®±éªŒè¯**ï¼šç”¨æˆ·æ³¨å†Œé‚®ç®±éªŒè¯æœºåˆ¶
- **æƒé™ç®¡ç†**ï¼šåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰

### ğŸ“ åšå®¢æ ¸å¿ƒåŠŸèƒ½
- **æ–‡ç« ç®¡ç†**ï¼šæ”¯æŒ Markdown ç¼–è¾‘ï¼Œå¯Œæ–‡æœ¬å†…å®¹
- **æ™ºèƒ½ç¼“å­˜**ï¼šRedis ç¼“å­˜ç³»ç»Ÿï¼Œè‡ªåŠ¨åŒæ­¥æ•°æ®åº“å˜æ›´ï¼Œæ”¯æŒç¼“å­˜é¢„çƒ­
- **æ ‡ç­¾ç³»ç»Ÿ**ï¼šæ–‡ç« åˆ†ç±»æ ‡ç­¾ç®¡ç†
- **è¯„åˆ†ç³»ç»Ÿ**ï¼š5 æ˜Ÿè¯„åˆ†ï¼Œé˜²é‡å¤æŠ•ç¥¨æœºåˆ¶
- **è¯„è®ºç³»ç»Ÿ**ï¼šæ”¯æŒåµŒå¥—å›å¤çš„æ ‘å½¢è¯„è®ºç»“æ„
- **å…¨æ–‡æœç´¢**ï¼šæ–‡ç« æ ‡é¢˜å’Œå†…å®¹æœç´¢
- **SEO ä¼˜åŒ–**ï¼šè‡ªåŠ¨æäº¤åˆ° Google/Bing æœç´¢å¼•æ“
- **åˆ†é¡µä¼˜åŒ–**ï¼šé«˜æ•ˆçš„åˆ†é¡µæŸ¥è¯¢æœºåˆ¶

### ğŸ“Š æ•°æ®åˆ†æä¸ç›‘æ§
- **å®æ—¶ç›‘æ§**ï¼šWebSocket å®æ—¶ç³»ç»Ÿæ€§èƒ½ç›‘æ§ï¼ˆCPU/å†…å­˜ï¼‰
- **è®¿é—®ç»Ÿè®¡**ï¼šé›†æˆ Google Analyticsï¼Œå®æ—¶ UV/PV ç»Ÿè®¡
- **æ—¥å¿—ç®¡ç†**ï¼šç»“æ„åŒ–æ—¥å¿—ï¼Œæ”¯æŒ ELK æ—¥å¿—åˆ†æ

### ğŸ”§ æŠ€æœ¯äº®ç‚¹
- **å¼‚æ­¥æ¶æ„**ï¼šå…¨å¼‚æ­¥ FastAPI + SQLAlchemy å¼‚æ­¥ ORM
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šCelery + RabbitMQ å¼‚æ­¥ä»»åŠ¡å¤„ç†
- **æ–‡ä»¶å­˜å‚¨**ï¼šé˜¿é‡Œäº‘ OSS å¯¹è±¡å­˜å‚¨é›†æˆ
- **æ•°æ®åº“**ï¼šMySQL + Redis åŒå­˜å‚¨æ¶æ„
- **å®¹å™¨åŒ–**ï¼šDocker + GitLab CI/CD è‡ªåŠ¨åŒ–éƒ¨ç½²
- **ç¼“å­˜ç­–ç•¥**ï¼šå¤šçº§ç¼“å­˜æ¶æ„ï¼Œæ”¯æŒç¼“å­˜é¢„çƒ­å’Œè‡ªåŠ¨å¤±æ•ˆ
- **è¿æ¥æ± **ï¼šæ•°æ®åº“å’Œ Redis è¿æ¥æ± ä¼˜åŒ–
- **å®‰å…¨æœºåˆ¶**ï¼šé˜² SQL æ³¨å…¥ã€XSS æ”»å‡»ã€CSRF é˜²æŠ¤

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·å‰ç«¯      â”‚    â”‚   ç®¡ç†å‘˜å‰ç«¯    â”‚    â”‚   ç§»åŠ¨ç«¯ H5     â”‚
â”‚   (Vue3/Vike)   â”‚    â”‚ (Vue Element)   â”‚    â”‚   (å“åº”å¼)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                      â”‚                      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      FastAPI åç«¯        â”‚
                    â”‚   (å¼‚æ­¥ API Gateway)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                      â”‚                      â”‚
    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
    â”‚   MySQL   â”‚         â”‚   Redis   â”‚         â”‚    OSS    â”‚
    â”‚  ä¸»æ•°æ®åº“  â”‚         â”‚   ç¼“å­˜å±‚   â”‚         â”‚  æ–‡ä»¶å­˜å‚¨  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
FastApi_Blog/
â”œâ”€â”€ app/                          # åç«¯åº”ç”¨
â”‚   â”œâ”€â”€ Fast_blog/
â”‚   â”‚   â”œâ”€â”€ database/            # æ•°æ®åº“è¿æ¥å±‚
â”‚   â”‚   â”œâ”€â”€ middleware/          # ä¸­é—´ä»¶æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ backtasks.py     # Celery å¼‚æ­¥ä»»åŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ TokenAuthentication.py # JWT è®¤è¯
â”‚   â”‚   â”œâ”€â”€ model/               # æ•°æ®æ¨¡å‹å±‚
â”‚   â”‚   â”œâ”€â”€ schemas/             # è¯·æ±‚/å“åº”æ¨¡å‹
â”‚   â”‚   â””â”€â”€ unit/                # ä¸šåŠ¡æ¨¡å—
â”‚   â”‚       â”œâ”€â”€ AdminApp/        # ç®¡ç†å‘˜æ¥å£
â”‚   â”‚       â”œâ”€â”€ Blog_app/        # åšå®¢æ ¸å¿ƒæ¥å£
â”‚   â”‚       â”œâ”€â”€ User_app/        # ç”¨æˆ·ç®¡ç†æ¥å£
â”‚   â”‚       â”œâ”€â”€ SystemMonitoring/# ç³»ç»Ÿç›‘æ§ WebSocket
â”‚   â”‚       â””â”€â”€ Power_Crawl/     # æ•°æ®çˆ¬è™«æ¨¡å—
â”‚   â””â”€â”€ main.py                  # åº”ç”¨å…¥å£
â”œâ”€â”€ blogvuets/                   # ç”¨æˆ·å‰ç«¯ (Vue3 + Vike)
â””â”€â”€ vue-element-admin-master/    # ç®¡ç†åå° (Vue2 + Element)
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯
- **Web æ¡†æ¶**ï¼šFastAPI (å¼‚æ­¥é«˜æ€§èƒ½)
- **ORM**ï¼šSQLAlchemy 2.0 (å¼‚æ­¥)
- **æ•°æ®åº“**ï¼šMySQL 8.0+ / Redis 6.0+
- **ä»»åŠ¡é˜Ÿåˆ—**ï¼šCelery + RabbitMQ
- **è®¤è¯**ï¼šJWT + OAuth2
- **æ–‡ä»¶å­˜å‚¨**ï¼šé˜¿é‡Œäº‘ OSS
- **æ—¥å¿—**ï¼šLogstash + ELK Stack

### å‰ç«¯æŠ€æœ¯
- **ç”¨æˆ·ç«¯**ï¼šVue 3 + Vike (SSR)
- **ç®¡ç†ç«¯**ï¼šVue 2 + Element UI
- **çŠ¶æ€ç®¡ç†**ï¼šPinia / Vuex
- **HTTP å®¢æˆ·ç«¯**ï¼šAxios
- **UI ç»„ä»¶**ï¼šElement Plus / Element UI

### DevOps
- **å®¹å™¨åŒ–**ï¼šDocker + Docker Compose
- **CI/CD**ï¼šGitLab Runner
- **ç›‘æ§**ï¼šPrometheus + Grafana
- **æ—¥å¿—**ï¼šELK Stack

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.8+
- Node.js 16+
- MySQL 8.0+
- Redis 6.0+
- RabbitMQ 3.8+

### ç¯å¢ƒå˜é‡é…ç½®
åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®ä»¥ä¸‹å˜é‡ï¼š

```bash
# æ•°æ®åº“é…ç½®
DB_HOSTNAME=localhost
DB_PORT=3306
DB_NAME=blog_db
DB_USERNAME=your_username
DB_PASSWORD=your_password

# Redis é…ç½®
REDIS_DB_HOSTNAME=localhost
REDIS_DB_PORT=6379
REDIS_DB_PASSWORD=your_redis_password
REDIS_DB_NAME=0

# æ¶ˆæ¯é˜Ÿåˆ—é…ç½®
MQ_HOSTNAME=localhost
MQ_DBPORT=5672
MQ_USERNAME=your_mq_username
MQ_USERPASSWORD=your_mq_password
MQ_DBNAME=your_vhost

# é˜¿é‡Œäº‘ OSS é…ç½®
ACCESS_KEY_ID=your_access_key_id
ACCESS_KEY_SECRET=your_access_key_secret

# Google æœåŠ¡é…ç½®
ADMIN_RECAPTCHA_SECRET_KEY=your_admin_recaptcha_key
GENERAL_USER_RECAPTCHA_SECRET_KEY=your_user_recaptcha_key

# JWT é…ç½®
SECRET_KEY=your_jwt_secret_key
REFSECRET_KEY=your_refresh_secret_key

# GitHub OAuth é…ç½®
GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret
REDIRECT_URI=your_redirect_uri

# SMTP é‚®ä»¶é…ç½®
SMTPSERVER=your_smtp_server
SMTPPORT=587
SMTPUSER=your_email
SMTPPASSWORD=your_email_password

# ELK æ—¥å¿—é…ç½®
LOGSTASH_NGINX_HOST=your_logstash_host
LOGSTASH_NGINX_PORT=443
LOGSTASH_USER=your_logstash_user
LOGSTASH_PASS=your_logstash_password
```

### ğŸ³ Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd FastApi_Blog

# ä½¿ç”¨ Docker Compose å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps
```

### ğŸ“¦ æ‰‹åŠ¨éƒ¨ç½²

#### åç«¯éƒ¨ç½²
```bash
# è¿›å…¥åç«¯ç›®å½•
cd app

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# æ•°æ®åº“è¿ç§»
alembic upgrade head

# å¯åŠ¨åç«¯æœåŠ¡
uvicorn main:app --host 0.0.0.0 --port 8000 --reload

# å¯åŠ¨ Celery Worker (æ–°ç»ˆç«¯)
celery -A Fast_blog.middleware.backtasks:celery_app worker --loglevel=info -P eventlet

# å¯åŠ¨ Celery Beat (æ–°ç»ˆç«¯)
celery -A Fast_blog.middleware.backtasks:celery_app beat --loglevel=info
```

#### å‰ç«¯éƒ¨ç½²
```bash
# ç”¨æˆ·å‰ç«¯
cd blogvuets
npm install
npm run dev  # å¼€å‘æ¨¡å¼
npm run build  # ç”Ÿäº§æ„å»º

# ç®¡ç†åå°
cd vue-element-admin-master
npm install
npm run dev  # å¼€å‘æ¨¡å¼
npm run build:prod  # ç”Ÿäº§æ„å»º
```

## ğŸŒ è®¿é—®åœ°å€

- **åç«¯ API**ï¼šhttp://localhost:8000
- **API æ–‡æ¡£**ï¼šhttp://localhost:8000/docs
- **ç”¨æˆ·å‰ç«¯**ï¼šhttp://localhost:3000
- **ç®¡ç†åå°**ï¼šhttp://localhost:9527

## ğŸ”Œ API æ¥å£æ¦‚è§ˆ

### ç”¨æˆ·ç«¯æ¥å£ (`/api/generaluser`)
- ç”¨æˆ·æ³¨å†Œ/ç™»å½•
- é‚®ç®±éªŒè¯
- GitHub OAuth ç™»å½•
- è¯„è®ºç®¡ç†
- ç”¨æˆ·èµ„æ–™æ›´æ–°

### åšå®¢æ¥å£ (`/api/views`)
- æ–‡ç« åˆ—è¡¨åˆ†é¡µæŸ¥è¯¢
- æ–‡ç« è¯¦æƒ…è·å–
- æ–‡ç« æœç´¢
- æ–‡ç« è¯„åˆ†
- Bing æ¯æ—¥å£çº¸

### ç®¡ç†å‘˜æ¥å£ (`/api/admin`)
- ç®¡ç†å‘˜è®¤è¯
- ç”¨æˆ·ç®¡ç† CRUD
- æ–‡ç« ç®¡ç† CRUD
- æ ‡ç­¾ç®¡ç†
- SEO ä¼˜åŒ–å·¥å…·

### ç³»ç»Ÿç›‘æ§ (`/api/monitoring`)
- WebSocket å®æ—¶ç›‘æ§
- ç³»ç»Ÿæ€§èƒ½æ•°æ®

## âš ï¸ éƒ¨ç½²æ³¨æ„äº‹é¡¹

### ç”Ÿäº§ç¯å¢ƒé…ç½®
1. **HTTPS è¯ä¹¦**ï¼šå»ºè®®ä½¿ç”¨ Let's Encrypt æˆ–å…¶ä»– SSL è¯ä¹¦
2. **Nginx åå‘ä»£ç†**ï¼šé…ç½®è´Ÿè½½å‡è¡¡å’Œé™æ€æ–‡ä»¶æœåŠ¡
3. **æ•°æ®åº“ä¼˜åŒ–**ï¼šMySQL ç´¢å¼•ä¼˜åŒ–ï¼ŒRedis å†…å­˜é…ç½®
4. **å®‰å…¨é…ç½®**ï¼šé˜²ç«å¢™è®¾ç½®ï¼Œç«¯å£é™åˆ¶
5. **ç›‘æ§å‘Šè­¦**ï¼šé…ç½®ç³»ç»Ÿç›‘æ§å’Œæ—¥å¿—å‘Šè­¦

### æ€§èƒ½ä¼˜åŒ–å»ºè®®
- å¯ç”¨ Redis ç¼“å­˜é¢„çƒ­
- é…ç½® CDN åŠ é€Ÿé™æ€èµ„æº
- æ•°æ®åº“è¯»å†™åˆ†ç¦»
- å¯ç”¨ Gzip å‹ç¼©

## ğŸ“‹ ä¸»è¦åŠŸèƒ½æ¨¡å—

### ğŸ‘¤ ç”¨æˆ·ç³»ç»Ÿ
- [x] ç”¨æˆ·æ³¨å†Œ/ç™»å½•
- [x] é‚®ç®±éªŒè¯
- [x] GitHub OAuth ç™»å½•
- [x] äºŒç»´ç æ‰«ç ç™»å½•
- [x] ç”¨æˆ·èµ„æ–™ç®¡ç†
- [x] å¤´åƒä¸Šä¼ 

### ğŸ“– åšå®¢ç³»ç»Ÿ
- [x] æ–‡ç«  CRUD æ“ä½œ
- [x] Markdown ç¼–è¾‘å™¨
- [x] å›¾ç‰‡ä¸Šä¼ 
- [x] æ–‡ç« åˆ†ç±»æ ‡ç­¾
- [x] æ–‡ç« æœç´¢
- [x] æ–‡ç« ç¼“å­˜ä¼˜åŒ–
- [x] Bing æ¯æ—¥å£çº¸é›†æˆ
- [x] æ–‡ç« å‘å¸ƒçŠ¶æ€ç®¡ç†
- [x] æ–‡ç« è®¿é—®é‡ç»Ÿè®¡

### ğŸ’¬ äº’åŠ¨åŠŸèƒ½
- [x] æ–‡ç« è¯„è®ºç³»ç»Ÿ
- [x] åµŒå¥—å›å¤
- [x] æ–‡ç« è¯„åˆ†
- [x] ç‚¹èµåŠŸèƒ½

### ğŸ”§ ç®¡ç†åå°
- [x] ç”¨æˆ·ç®¡ç†
- [x] æƒé™ç®¡ç†
- [x] æ–‡ç« ç®¡ç†
- [x] è¯„è®ºå®¡æ ¸
- [x] ç³»ç»Ÿç›‘æ§
- [x] SEO ç®¡ç†ï¼ˆGoogle/Bing æœç´¢å¼•æ“æäº¤ï¼‰
- [x] æ–‡ä»¶ä¸Šä¼ ç®¡ç†
- [x] åŠ¨æ€æƒé™èœå•

### ğŸ“Š æ•°æ®ç»Ÿè®¡
- [x] è®¿é—®ç»Ÿè®¡ (UV/PV)
- [x] ç³»ç»Ÿæ€§èƒ½ç›‘æ§
- [x] æ—¥å¿—åˆ†æ
- [x] ç”µåŠ›æ•°æ®çˆ¬è™«ï¼ˆå¯é€‰æ¨¡å—ï¼‰

## ğŸ”„ CI/CD æµæ°´çº¿

é¡¹ç›®æ”¯æŒ GitLab CI/CD è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼š

```yaml
# .gitlab-ci.yml
stages:
  - test
  - build
  - deploy

test:
  stage: test
  script:
    - pytest

build:
  stage: build
  script:
    - docker build -t blog-api .

deploy:
  stage: deploy
  script:
    - docker-compose up -d
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº Apache License 2.0 å¼€æºè®¸å¯è¯ï¼Œè¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

```
Copyright 2023 GitLab Instance

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
```

## ğŸ™ è‡´è°¢

- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£åŒ–çš„ Python Web æ¡†æ¶
- [Vue.js](https://vuejs.org/) - æ¸è¿›å¼ JavaScript æ¡†æ¶  
- [Element UI](https://element.eleme.io/) - åŸºäº Vue 2.0 çš„æ¡Œé¢ç«¯ç»„ä»¶åº“
- [SQLAlchemy](https://www.sqlalchemy.org/) - Python SQL å·¥å…·åŒ…